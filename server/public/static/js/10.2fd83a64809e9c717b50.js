webpackJsonp([10],{"4KNx":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("KQHe"),a=s("vHhr"),l=(s("E4LH"),s("vMJZ")),i={name:"userDetail",components:{Upload:r.a,Sticky:a.a},data:function(){return{userItem:{id:"",username:"",usernick:"",newPassword:"",userpic:"/upload/userpic/default.jpg",role:"user",sex:"秘密",age:18,email:"",mobile:"",website:"",weibo:"",address:"",github:"",signature:"",job:"",status:1},rules:{username:[{required:!0,message:"用户名必须填写",trigger:"change"}],userpic:[{required:!0,message:"用户图像",trigger:"change"}]},fetchSuccess:!0,loading:!1,pageText:""}},mounted:function(){this.id=this.$route.query.id||"",this.me=this.$route.query.me||"",this.me?(this.pageText="更新我的信息",this.fetchData({me:"self"})):this.id?(this.pageText="修改用户",this.fetchData({id:this.id})):this.pageText="添加用户"},methods:{fetchData:function(e){var t=this,s={};if(e.me)s.me=me;else{if(!e.id)return;s.id=e.id}Object(l.a)(s).then(function(e){t.postForm=e.user,t.userItem.id=e.user._id,t.userItem.username=e.user.username,t.userItem.usernick=e.user.usernick,t.userItem.userpic=e.user.userpic,t.userItem.role=e.user.role,t.userItem.sex=e.user.sex,t.userItem.age=e.user.age,t.userItem.email=e.user.email,t.userItem.mobile=e.user.mobile,t.userItem.website=e.user.website,t.userItem.weibo=e.user.weibo,t.userItem.address=e.user.address,t.userItem.github=e.user.github,t.userItem.signature=e.user.signature,t.userItem.job=e.user.job,t.userItem.status=e.user.status,t.fetchSuccess=!0}).catch(function(e){t.fetchSuccess=!1,console.log(e)})},onSubmitForm:function(e){var t=this;this.$refs.userForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0,Object(l.d)(t.userItem).then(function(e){t.$notify({title:"成功",message:"更新用户成功",type:"success",duration:2e3}),t.loading=!1}).catch(function(e){t.loading=!1})})}}},u={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"createPost-container manage-article-container"},[s("el-form",{ref:"userForm",staticClass:"form-container",attrs:{"label-position":"left",rules:e.rules,model:e.userItem}},[s("sticky",{attrs:{className:"sub-navbar "+e.userItem.status}},[e.fetchSuccess?[s("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{"margin-left":"10px"},attrs:{type:"success"},on:{click:function(t){e.onSubmitForm(1)}}},[e._v(e._s(e.pageText)+"\n                ")])]:[s("el-tag",[e._v("发送异常错误,刷新页面,或者联系程序员")])]],2),e._v(" "),s("div",{staticClass:"createPost-main-container"},[s("el-form-item",{attrs:{label:"用户名",prop:"username","label-width":"90px"}},[s("el-input",{model:{value:e.userItem.username,callback:function(t){e.$set(e.userItem,"username",t)},expression:"userItem.username"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"昵称",prop:"usernick","label-width":"90px"}},[s("el-input",{model:{value:e.userItem.usernick,callback:function(t){e.$set(e.userItem,"usernick",t)},expression:"userItem.usernick"}})],1),e._v(" "),s("el-form-item",{attrs:{"label-width":"90px",label:"用户图像",prop:"userpic"}},[s("Upload",{attrs:{uploadType:"userpic",hideOne:!0},model:{value:e.userItem.userpic,callback:function(t){e.$set(e.userItem,"userpic",t)},expression:"userItem.userpic"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"密码",prop:"password","label-width":"90px"}},[s("el-input",{model:{value:e.userItem.password,callback:function(t){e.$set(e.userItem,"password",t)},expression:"userItem.password"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"性别",prop:"sex","label-width":"90px"}},[s("el-radio-group",{model:{value:e.userItem.sex,callback:function(t){e.$set(e.userItem,"sex",t)},expression:"userItem.sex"}},[s("el-radio",{attrs:{label:"男"}},[e._v("男")]),e._v(" "),s("el-radio",{attrs:{label:"女"}},[e._v("女")]),e._v(" "),s("el-radio",{attrs:{label:"保密"}},[e._v("保密")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"年龄",prop:"age","label-width":"90px"}},[s("el-input",{model:{value:e.userItem.age,callback:function(t){e.$set(e.userItem,"age",t)},expression:"userItem.age"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"email",prop:"email","label-width":"90px"}},[s("el-input",{model:{value:e.userItem.email,callback:function(t){e.$set(e.userItem,"email",t)},expression:"userItem.email"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"手机",prop:"mobile","label-width":"90px"}},[s("el-input",{model:{value:e.userItem.mobile,callback:function(t){e.$set(e.userItem,"mobile",t)},expression:"userItem.mobile"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"网站",prop:"website","label-width":"90px"}},[s("el-input",{model:{value:e.userItem.website,callback:function(t){e.$set(e.userItem,"website",t)},expression:"userItem.website"}},[s("template",{slot:"prepend"},[e._v("Http://")])],2)],1),e._v(" "),s("el-form-item",{attrs:{label:"微博",prop:"weibo","label-width":"90px"}},[s("el-input",{model:{value:e.userItem.weibo,callback:function(t){e.$set(e.userItem,"weibo",t)},expression:"userItem.weibo"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"github",prop:"github","label-width":"90px"}},[s("el-input",{model:{value:e.userItem.github,callback:function(t){e.$set(e.userItem,"github",t)},expression:"userItem.github"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"地址",prop:"address","label-width":"90px"}},[s("el-input",{model:{value:e.userItem.address,callback:function(t){e.$set(e.userItem,"address",t)},expression:"userItem.address"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"工作",prop:"job","label-width":"90px"}},[s("el-input",{model:{value:e.userItem.job,callback:function(t){e.$set(e.userItem,"job",t)},expression:"userItem.job"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"签名",prop:"signature","label-width":"90px"}},[s("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.userItem.signature,callback:function(t){e.$set(e.userItem,"signature",t)},expression:"userItem.signature"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"生效",prop:"order","label-width":"90px"}},[s("el-checkbox",{attrs:{label:"生效"},model:{value:e.userItem.status,callback:function(t){e.$set(e.userItem,"status",t)},expression:"userItem.status"}})],1)],1)],1)],1)},staticRenderFns:[]};var o=s("VU/8")(i,u,!1,function(e){s("xqHs")},"data-v-60634842",null);t.default=o.exports},xqHs:function(e,t){}});
//# sourceMappingURL=10.2fd83a64809e9c717b50.js.map