webpackJsonp([15],{"3kkb":function(t,e){},cgTB:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("vMJZ"),s=i("cAgV"),l=i("0xDb"),n={name:"userList",directives:{waves:s.a},components:{},data:function(){return{tableKey:0,list:null,total:null,listLoading:!0,listQuery:{page:1,pageSize:20,search:"",status:""},dialogtitle:"",dialogEditUser:!1,isEdit:!1,editData:null}},filters:{statusFilter:function(t){return{1:"success",0:"danger"}[t]},pictureFullUrlFilter:function(t){return""+t},parseTime:l.a},created:function(){this.getList()},mounted:function(){},methods:{getList:function(){var t=this;a.b(this.listQuery).then(function(e){t.total=e.count,t.list=e.users,t.listLoading=!1}).catch(function(e){t.total=0,t.list=[],t.listLoading=!1})},handleSizeChange:function(t){this.listQuery.limit=t,this.getList()},handleCurrentChange:function(t){this.listQuery.page=t,this.getList()},onHandleFilter:function(){var t=this;this.$nextTick(function(){t.getList()})},onCreateUser:function(t){t?this.$router.push({path:"/admin/u/user",query:{id:t._id}}):this.$router.push({path:"/admin/u/user"})},onHandleModifyStatus:function(t){var e=this;a.e({id:t._id,status:t.status}).then(function(t){e.getList()})},onHandleDelete:function(t){var e=this;a.c({id:t._id}).then(function(t){e.getList()})}}},r={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container manage-user-list"},[i("div",{staticClass:"filter-container"},[i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"用户名"},model:{value:t.listQuery.userName,callback:function(e){t.$set(t.listQuery,"userName",e)},expression:"listQuery.userName"}}),t._v(" "),i("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"昵称"},model:{value:t.listQuery.userNick,callback:function(e){t.$set(t.listQuery,"userNick",e)},expression:"listQuery.userNick"}}),t._v(" "),i("el-select",{staticClass:"filter-item",staticStyle:{width:"100px"},attrs:{placeholder:"用户角色"},on:{change:t.onHandleFilter},model:{value:t.listQuery.userRole,callback:function(e){t.$set(t.listQuery,"userRole",e)},expression:"listQuery.userRole"}},[i("el-option",{attrs:{label:"管理员",value:"admin"}}),t._v(" "),i("el-option",{attrs:{label:"用户",value:"user"}})],1),t._v(" "),i("el-checkbox",{staticClass:"filter-item",staticStyle:{"margin-left":"15px"},model:{value:t.listQuery.status,callback:function(e){t.$set(t.listQuery,"status",e)},expression:"listQuery.status"}},[t._v("有效")]),t._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onHandleFilter}},[t._v("搜索")]),t._v(" "),i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],staticClass:"filter-item",staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){t.onCreateUser(!1)}}},[t._v("添加分类")])],1),t._v(" "),i("div",{staticClass:"manage-article-content"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],key:t.tableKey,staticStyle:{width:"100%"},attrs:{data:t.list,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""}},[i("el-table-column",{attrs:{align:"left",label:"用户名","min-width":"90px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"link-type"},[t._v(t._s(e.row.username))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"昵称","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"link-type"},[t._v(t._s(e.row.usernick))])]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"110px",align:"center",label:"用户图像"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("img",{attrs:{src:t._f("pictureFullUrlFilter")(e.row.userpic),height:"90"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{width:"70px",align:"center",label:"角色"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s("admin"==e.row.role?"管理员":"普通用户"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"手机号","min-width":"90px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"link-type"},[t._v(t._s(e.row.mobile))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"邮箱","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"link-type"},[t._v(t._s(e.row.email))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"网站","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"link-type"},[t._v(t._s(e.row.website))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"left",label:"github","min-width":"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticClass:"link-type"},[t._v(t._s(e.row.github))])]}}])}),t._v(" "),i("el-table-column",{attrs:{"class-name":"status-col",label:"状态",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-tag",{attrs:{type:t._f("statusFilter")(e.row.status)}},[t._v(t._s(e.row.status?"有效":"无效"))])]}}])}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作",width:"280","class-name":"small-padding"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{directives:[{name:"waves",rawName:"v-waves"}],attrs:{type:"primary",size:"mini"},on:{click:function(i){t.onCreateUser(e.row)}}},[t._v("编辑")]),t._v(" "),1!=e.row.status?i("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(i){t.onHandleModifyStatus(e.row)}}},[t._v("生效")]):t._e(),t._v(" "),0!=e.row.status?i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.onHandleModifyStatus(e.row)}}},[t._v("禁用")]):t._e(),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){t.onHandleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.listLoading&&t.total>t.listQuery.pageSize,expression:"!listLoading && total>listQuery.pageSize"}],staticClass:"pagination-container"},[i("el-pagination",{attrs:{background:"","current-page":t.listQuery.page,"page-sizes":[10,20,30,50],"page-size":t.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.listQuery,"page",e)}}})],1)],1)])},staticRenderFns:[]};var u=i("VU/8")(n,r,!1,function(t){i("3kkb")},"data-v-030505ce",null);e.default=u.exports}});
//# sourceMappingURL=15.a1ea7c7e0d7163f897a0.js.map