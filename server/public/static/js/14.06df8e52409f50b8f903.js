webpackJsonp([14],{"T+/8":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});o("E4LH");var n={components:{NavFooter:o("gY5y").default},name:"login",data:function(){return{loginForm:{username:"",password:"",code:""},loginRules:{username:[{required:!0,trigger:"blur",validator:function(t,e,o){e.length<5?o(new Error("用户名不能小于5位")):o()}}],password:[{required:!0,trigger:"blur",validator:function(t,e,o){e.length<6?o(new Error("密码不能小于6位")):o()}}],code:[{required:!0,trigger:"blur",validator:function(t,e,o){e.length>5?o(new Error("验证码不能超过4位")):e.length<1?o(new Error("验证码不能为空")):o()}}]},pwdType:"password",picCode:"/api/code?v="+Date.now(),loading:!1,showDialog:!1}},methods:{showPwd:function(){"password"===this.pwdType?this.pwdType="":this.pwdType="password"},handleLogin:function(){var t=this;this.$refs.loginForm.validate(function(e){if(!e)return console.log("error submit!!"),!1;t.loading=!0,t.$store.dispatch("UserLoginForm",t.loginForm).then(function(e){t.loading=!1,t.$router.push({path:"/admin/index"})}).catch(function(){t.loading=!1})})},gotoReg:function(){this.$router.push({path:"/reg"})},changCode:function(){this.picCode="/api/code?v="+Date.now()},afterQRScan:function(){}},created:function(){},destroyed:function(){}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"afly-body-bg afly-login-container"},[o("div",{staticClass:"afly-wrapper"},[t._m(0),t._v(" "),o("div",{staticClass:"afly-login-box"},[o("el-form",{ref:"loginForm",staticClass:"card-box login-form",attrs:{autoComplete:"on",model:t.loginForm,rules:t.loginRules,"label-position":"left"}},[o("h3",{staticClass:"title"},[t._v("梅落残雪")]),t._v(" "),o("p",{staticClass:"desc"},[t._v("系统登录")]),t._v(" "),o("el-form-item",{attrs:{prop:"username"}},[o("span",{staticClass:"svg-container svg-container_login"},[o("svg-icon",{attrs:{"icon-class":"user"}})],1),t._v(" "),o("el-input",{attrs:{name:"username",type:"text",autoComplete:"on",placeholder:"用户名"},model:{value:t.loginForm.username,callback:function(e){t.$set(t.loginForm,"username",e)},expression:"loginForm.username"}})],1),t._v(" "),o("el-form-item",{attrs:{prop:"password"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"password"}})],1),t._v(" "),o("el-input",{attrs:{name:"password",type:t.pwdType,autoComplete:"on",placeholder:"密码"},model:{value:t.loginForm.password,callback:function(e){t.$set(t.loginForm,"password",e)},expression:"loginForm.password"}}),t._v(" "),o("span",{staticClass:"show-pwd",on:{click:t.showPwd}},[o("svg-icon",{attrs:{"icon-class":"eye"}})],1)],1),t._v(" "),o("el-form-item",{attrs:{prop:"code"}},[o("span",{staticClass:"svg-container"},[o("svg-icon",{attrs:{"icon-class":"code"}})],1),t._v(" "),o("el-input",{staticClass:"afly-code-input",attrs:{name:"code",type:"text",autoComplete:"on",placeholder:"验证码"},model:{value:t.loginForm.code,callback:function(e){t.$set(t.loginForm,"code",e)},expression:"loginForm.code"}}),t._v(" "),o("img",{staticClass:"afly-form-code",attrs:{src:t.picCode},on:{click:t.changCode}})],1),t._v(" "),o("el-button",{staticClass:"btn-black",staticStyle:{width:"100%"},attrs:{type:"primary",loading:t.loading},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t._v("登录")]),t._v(" "),o("div",{staticClass:"tips"},[t._v("-- OR --")]),t._v(" "),o("el-button",{staticClass:"btn-link",staticStyle:{width:"100%"},attrs:{type:"text",loading:t.loading},nativeOn:{click:function(e){return e.preventDefault(),t.gotoReg(e)}}},[t._v("注册")])],1)],1),t._v(" "),o("nav-footer",{staticClass:"afly-login-footer"})],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"afly-header"},[e("div",{staticClass:"afly-header-top"})])}]};var s=o("VU/8")(n,a,!1,function(t){o("ooeW")},null,null);e.default=s.exports},ooeW:function(t,e){}});
//# sourceMappingURL=14.06df8e52409f50b8f903.js.map